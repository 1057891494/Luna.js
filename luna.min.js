/*! 
====================================
    个人内部使用的小型js工具库
    心叶
    V0.0.1-alpha
    最后修改于：2018-02-04
====================================
*/

!function(e,t,n){"use strict";if(!e||!e.document)throw new Error("Luna requires a window with a document!");!function(e,t){var n=function(e,t){return new n.prototype.init(e,t)};n.prototype.init=function(e,i,o){var l;if("string"==typeof e&&(e=(e+"").trim()),this.length=0,o=o||r,i=i?n(i)[0]:document,!e)return this;if(this.selector=e,"body"==e)return this.context=document,this[0]=document.body,this.isTouch=!0,this.length=1,this;if("document"==e)return this.context=null,this[0]=document,this.isTouch=!0,this.length=1,this;if("string"==typeof e){if(e=(e+"").trim().replace(/[\n\f\r]/g,""),/^</.test(e)){if(!i)throw new Error("Parameter error!");var s=document.createElement("div");return s.innerHTML=e,this[0]=s.childNodes[0],this.isTouch=!0,this.length=1,this.context=t,this}if(!n.sizzle)throw new Error("Sizzle is necessary for Luna!");var c=n.sizzle(e,i);for(l=0;l<c.length;l++)this[l]=c[l];return this.length=l,this.isTouch=!0,this.context=i,this}if(1===e.nodeType||11===e.nodeType||9===e.nodeType)return this.context=i,this[0]=e,this.isTouch=!0,this.length=1,this;if("function"==typeof e)return n.__isLoad__?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),e(),n.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function t(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),e(),n.__isLoad__=!0)}),this;if(e.isTouch){for(this.isTouch=!0,l=0;l<e.length;l++)this[l]=e[l];return this.context=e.context||i,this.length=e.length,this.selector=e.selector,this}return this};var r=n(document);n.prototype.extend=n.extend=function(){var e=arguments[0]||{},t=arguments[1]||{},n=arguments.length;for(var r in 1===n&&(t=e,e=this),"object"!=typeof e&&"function"!=typeof e&&(e={}),t)try{e[r]=t[r]}catch(e){throw new Error("Illegal property value！")}return e},n.prototype.init.prototype=n.prototype,n.__isLoad__=!1,n.clock={timers:[],interval:13,speeds:400,timerId:null},n._sizzle_={},n.author="心叶",n.author_english="yelloxing",n.email="yelloxing@gmail.com",n.description="不断优化的小型js工具库",n.build="2018/02/01",e.Luna=e.$=n}(e)}(window),function(e,t,n){"use strict";t.prototype.extend({bind:function(n,r,i){var o=t(this);return e.attachEvent?o[0].attachEvent("on"+n,r):(i=i||!1,o[0].addEventListener(n,r,i)),o},unbind:function(n,r,i){var o=t(this);return e.detachEvent?o[0].detachEvent("on"+n,r):(i=i||!1,o[0].removeEventListener(n,r,i)),o}})}(window,window.Luna),function(e,t,n){"use strict";t.prototype.extend({html:function(e){var n=t(this);if(""==e||e){for(var r=0;r<n.length;r++)n[r].innerHTML=e;return n}return n[0].innerHTML},text:function(e){var n=t(this);if(e){for(var r=0;r<n.length;r++)n[0].innerText=e;return n}return n[0].innerText},val:function(e){var n=t(this);if(e){for(var r=0;r<n.length;r++)n[0].value=e;return n}return n[0].value},attr:function(e,n){var r=t(this);if(n){for(var i=0;i<r.length;i++)r[0].setAttribute(e,n);return r}return r[0].getAttribute(e)},hasClass:function(e){var n=t(this[0]);return!!("string"==typeof e&&e&&(" "+n.class()+" ").search(" "+e+" ")>=0)},addClass:function(e){var n,r,i=t(this);if("string"==typeof e&&e){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var l=t.uniqueClass(r,e);n.setAttribute("class",l),n=i[o++]}}return i},removeClass:function(e){var n,r,i=t(this);if("string"==typeof e&&e){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var l=t.operateClass(r,e,!0);n.setAttribute("class",l),n=i[o++]}}return i},toggleClass:function(e){var n,r,i=t(this);if("string"==typeof e&&e){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var l=t.operateClass(r,e);n.setAttribute("class",l),n=i[o++]}}return i},class:function(e){var n,r=t(this);if("string"!=typeof e||!e)return r[0].getAttribute("class")||"";var i=0;for(n=r[i++];n;)n.setAttribute("class",t.uniqueClass(e)),n=r[i++];return r},css:function(e,n){var r,i=t(this);if("string"==typeof e&&1===arguments.length)return i[0].style[e];if("string"==typeof e&&"string"==typeof n)for(r=0;r<i.length;r++)i[r].style[e]=n;else{if("object"!=typeof e)throw new Error("Not acceptable type!");for(var o in e)for(r=0;r<i.length;r++)i[r].style[o]=e[o]}return i},append:function(e){var n,r=t(this);if(1===e.nodeType||11===e.nodeType||9===e.nodeType)for(n=0;n<r.length;n++)r[n].appendChild(e);else if(e.isTouch)for(n=0;n<r.length;n++)r[n].appendChild(e[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");for(n=0;n<r.length;n++)r[n].appendChild(t(e)[0])}return r},prepend:function(e){var n,r=t(this);if(1===e.nodeType||11===e.nodeType||9===e.nodeType)for(n=0;n<r.length;n++)r[n].insertBefore(e,r[0].childNodes[0]);else if(e.isTouch)for(n=0;n<r.length;n++)r[n].insertBefore(e[0],r[0].childNodes[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");for(n=0;n<r.length;n++)r[n].insertBefore(t(e)[0],r[0].childNodes[0])}return r},after:function(e){var n,r,i=t(this);for(n=0;n<i.length;n++)if(r=i[n].parentNode||t("body")[0],1===e.nodeType||11===e.nodeType||9===e.nodeType)r.insertBefore(e,i[0].nextSibling);else if(e.isTouch)r.insertBefore(e[0],i[0].nextSibling);else{if("string"!=typeof e)throw new Error("Not acceptable type!");r.insertBefore(t(e)[0],i[0].nextSibling)}return i},before:function(e){var n,r,i=t(this);for(r=0;r<i.length;r++)if(n=i[0].parentNode||t("body")[0],1===e.nodeType||11===e.nodeType||9===e.nodeType)n.insertBefore(e,i[0]);else if(e.isTouch)n.insertBefore(e[0],i[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");n.insertBefore(t(e)[0],i[0])}return i},remove:function(){var e,n=t(this);for(e=0;e<n.length;e++)(n[e].parentNode||t("body")[0]).removeChild(n[0]);return n},empty:function(){var e,n=t(this);for(e=0;e<n.length;e++)$(n[e]).html("");return n}})}(window,window.Luna),function(e,t,n){"use strict";t.extend({outerHTML:function(e){return e.outerHTML||(t=e,(r=document.createElement("div")).appendChild(t),n=r.innerHTML,r=null,n);var t,n,r},uniqueClass:function(){for(var e="",t=0;t<arguments.length;t++){if("string"!=typeof arguments[t])throw new Error("Only string is valid,not project!");e+=arguments[t]+" "}var n=(e=e.trim()).split(/ +/),r={};for(var i in n.forEach(function(e){r[e]=!0},this),e="",r)r[i]&&(e+=i+" ");return e.trim()},operateClass:function(e,t,n){if("string"!=typeof e||"string"!=typeof t)throw new Error("Only string is valid,not project!");e=e.trim(),t=t.trim();var r=e.split(/ +/),i=t.split(/ +/),o={};r.forEach(function(e){o[e]=!0},this),i.forEach(function(e){o[e]=!n&&!o[e]},this);var l="";for(var s in o)o[s]&&(l+=s+" ");return l.trim()}})}(window,window.Luna),function(e,t,n){"use strict";t.extend({animation:function(e,n,r){t.clock.timer(function(t){e(t)},n,r)}}),t.extend(t.clock,{timer:function(e,n,r){if(!e)throw new Error("tick is required!");n=n||t.clock.speeds,t.clock.timers.push({createTime:new Date,tick:e,duration:n,callback:r}),t.clock.start()},start:function(){t.clock.timerId||(t.clock.timerId=e.setInterval(t.clock.tick,t.clock.interval))},tick:function(){var e,n,r,i,o,l,s,c=t.clock.timers;for(t.clock.timers=[],t.clock.timers.length=0,n=0;n<c.length;n++)e=(o=c[n]).createTime,r=o.tick,l=o.duration,i=o.callback,!1,(s=(+new Date-e)/l)>=1&&!0,r(100*(s=s>1?1:s)),s<1?t.clock.timers.push(o):i&&i();t.clock.timers.length<=0&&t.clock.stop()},stop:function(){t.clock.timerId&&(e.clearInterval(t.clock.timerId),t.clock.timerId=null)}})}(window,window.Luna),function(e,t,n){"use strict";t.extend(t._sizzle_,{notLayer:function(e){return!/[> ~+]/.test(e)},notComplex:function(e){return!t._sizzle_.notLayer(e)||(!/[#.[]/.test(e)||!!/^[#.[]/.test(e)&&(e=e.replace(/^[#.[]/,""),!/[#.[]/.test(e)))},isSingle:function(e){return!(!t._sizzle_.notLayer(e)||!t._sizzle_.notComplex(e))},isID:function(e){return!!/^#/.test(e)},isClass:function(e){return!!/^\./.test(e)},isElemment:function(e){return!/^[#.[]/.test(e)},isAttr:function(e){return!!/^\[([^=]+)=(["'])([^=]+)\2\]$/.test(e)},isValidComplex:function(e){return""==(e=(e=(e=(e=e.replace(/^[^#.[]+/,"")).replace(/\[([^=]+)=(["'])([^=]+)\2\]/g,"")).replace(/#[^#.[]+/g,"")).replace(/\.[^#.[]+/g,""))},toComplexSelectorObject:function(e){var t,n={},r=e.match(/^[^#.[]+/);if(r&&r.length>0&&(n._elem_=r[0]),(r=e.match(/\[([^=]+)=(["'])([^=]+)\2\]/g))&&r.length>0)for(n._attr_=[],t=0;t<r.length;t++)n._attr_.push(r[t]);if((r=e.match(/#[^#.[]+/g))&&r.length>0&&(n._id_=r[0].replace(/^#/,"")),(r=e.match(/\.[^#.[]+/g))&&r.length>0)for(n._class_=[],t=0;t<r.length;t++)n._class_.push(r[t].replace(/^\./,""));return n},checkedElems:function(e,t){var n,r,i,o,l,s=[];for(n=0;n<e.length;n++){if(l=!0,t._elem_&&l&&e[n].tagName!=(t._elem_+"").toUpperCase()&&(l=!1),t._class_&&t._class_.length>0&&l)for(e[n].getAttribute?i=" "+(i=e[n].getAttribute("class")||"")+" ":l=!1,r=0;r<t._class_.length&&l;r++)i.search(" "+t._class_[r]+" ")<0&&(l=!1);if(t._attr_&&t._attr_.length>0&&l)for(r=0;r<t._attr_.length&&l;r++)o=/^\[([^=]+)=(["'])([^=]+)\2\]$/.exec(t._attr_[r]),e[n].getAttribute&&e[n].getAttribute(o[1])==o[3]||(l=!1);l&&s.push(e[n])}return s},filter:function(e,n){var r,i,o;if(n&&"*"!=n)if(n=n.trim(),t._sizzle_.isSingle(n))if(t._sizzle_.isID(n))for(i=e,e=[],o=0;o<i.length;o++)i[o].getAttribute&&"#"+i[o].getAttribute("id")==n&&e.push(i[o]);else if(t._sizzle_.isClass(n))for(i=e,e=[],o=0;o<i.length;o++)i[o].getAttribute&&(" "+i[o].getAttribute("class")+" ").search(" "+n.replace(/^\./,"")+" ")>=0&&e.push(i[o]);else if(t._sizzle_.isElemment(n))for(i=e,e=[],o=0;o<i.length;o++)i[o].tagName==(n+"").toUpperCase()&&e.push(i[o]);else{if(!t._sizzle_.isAttr(n))throw new Error("invalid selector1:"+n);for(i=e,e=[],o=0;o<i.length;o++)r=/^\[([^=]+)=(["'])([^=]+)\2\]$/.exec(n),i[o].getAttribute&&i[o].getAttribute(r[1])==r[3]&&e.push(i[o])}else{if(!t._sizzle_.notLayer(n))throw new Error("undesigned selector:"+n);if(!t._sizzle_.isValidComplex(n))throw new Error("invalid selector2:"+n);e=t._sizzle_.checkedElems(e,t._sizzle_.toComplexSelectorObject(n))}return e}}),t.extend({sizzle:function(e,n){var r,i,o,l=[];if("*"==(e=e.trim()))for(i=n.getElementsByTagName("*"),r=0;r<i.length;r++)l.push(i[r]);else if(t._sizzle_.isSingle(e))if(t._sizzle_.isID(e))l.push(document.getElementById(e.replace(/^#/,"")));else if(t._sizzle_.isClass(e))if(n.getElementsByClassName)for(i=n.getElementsByClassName(e.replace(/^./,"")),r=0;r<i.length;r++)l.push(i[r]);else for(i=n.getElementsByTagName("*"),r=0;r<i.length;r++)t(i[r]).hasClass(e.replace(/^./,""))&&l.push(i[r]);else if(t._sizzle_.isElemment(e))for(i=n.getElementsByTagName(e),r=0;r<i.length;r++)l.push(i[r]);else{if(!t._sizzle_.isAttr(e))throw new Error("invalid selector1:"+e);if(n.querySelectorAll){i=n.getElementsByTagName("*");var s=/^\[([^=]+)=(["'])([^=]+)\2\]$/.exec(e);for(r=0;r<i.length;r++)s[3]==t(i[r]).attr(s[1])&&l.push(i[r])}else for(i=n.querySelectorAll(e),r=0;r<i.length;r++)l.push(i[r])}else if(t._sizzle_.notLayer(e)){if(!t._sizzle_.isValidComplex(e))throw new Error("invalid selector2:"+e);var c=t._sizzle_.toComplexSelectorObject(e),h=[];if(c._id_)return h=[document.getElementById(c._id_)],t._sizzle_.checkedElems(h,c);if(c._elem_)return h=n.getElementsByTagName(c._elem_),t._sizzle_.checkedElems(h,c);if(!(c._class_&&c._class_.length>0))return h=n.getElementsByTagName("*"),t._sizzle_.checkedElems(h,c);if(n.getElementsByClassName)return h=n.getElementsByClassName(c._class_[0]),t._sizzle_.checkedElems(h,c)}else{var a=e.replace(/ *([>+~]) */g,"@$1@").replace(/ +/g,"@ @").split("@");for(r=0;r<a.length;r++)if(""==a[r])throw new Error("invalid selector3:"+e);var f,u,g,d,p,_,y,m=t.sizzle(a[a.length-1],n),v=[];for(r=0;r<m.length;r++)v.push({0:m[r],length:1});for(r=a.length-1;r>1;r-=2)if(f=a[r-2],">"==(u=a[r-1])){for(o=0;o<m.length;o++)if(d=0,v[o]&&v[o].length>0){for(g=0;g<v[o].length;g++)(p=$(v[o][g]).parent().filter(f)).length>0&&(v[o][d]=p,d++);v[o].length=d}}else if("~"==u){for(o=0;o<m.length;o++)if(d=0,v[o]&&v[o].length>0){for(_=[],g=0;g<v[o].length;g++)for(p=$(v[o][g]).prevAll(f),y=0;y<p.length;y++)_[d]=p[y],d++;for(v[o].length=d,y=0;y<_.length;y++)v[o][y]=_[y]}}else if("+"==u){for(o=0;o<m.length;o++)if(d=0,v[o]&&v[o].length>0){for(g=0;g<v[o].length;g++)(p=$(v[o][g]).prev().filter(f)).length>0&&(v[o][d]=p,d++);v[o].length=d}}else for(o=0;o<m.length;o++)if(d=0,v[o]&&v[o].length>0){for(_=[],g=0;g<v[o].length;g++)for(p=$(v[o][g]).parents(f),y=0;y<p.length;y++)_[d]=p[y],d++;for(v[o].length=d,y=0;y<_.length;y++)v[o][y]=_[y]}for(r=0;r<m.length;r++)v[r]&&v[r].length>0&&l.push(m[r])}return l}})}(window,window.Luna),function(e,t,n){"use strict";t.prototype.extend({parent:function(){var e,n,r=t(this),i=0;for(e=0;e<r.length;e++){for(r[e]&&(n=r[e].parentNode);n&&1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType&&n.parentNode;)n=n.parentNode;!n||1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType||(r[i]=n,i++)}for(e=i;e<r.length;e++)delete r[e];return r.length=i,r.selector=r.selector+":parent()",r},parents:function(e){e=e||"";for(var n,r=t(this),i=r[0],o=[];i&&i.parentNode;)1!==(i=i.parentNode).nodeType&&11!==i.nodeType&&9!==i.nodeType||o.push(i);for(n=(o=t._sizzle_.filter(o,e)).length;n<r.length;n++)delete r[n];for(r.length=o.length,n=0;n<o.length;n++)r[n]=o[n];return r.selector=r.selector+":parents('"+e+"')",r},children:function(e){e=e||"";var n,r=t(this),i=r[0],o=[];if(i){for(i=i.childNodes,n=0;n<i.length;n++)1!==i[n].nodeType&&11!==i[n].nodeType&&9!==i[n].nodeType||o.push(i[n]);o=t._sizzle_.filter(o,e)}else o=[];for(n=o.length;n<r.length;n++)delete r[n];for(r.length=o.length,n=0;n<o.length;n++)r[n]=o[n];return r.selector=r.selector+":children('"+e+"')",r},siblings:function(e){e=e||"";var n,r=t(this),i=r[0],o=[];if(i){for(i=i.parentNode;i&&1!==i.nodeType&&11!==i.nodeType&&9!==i.nodeType&&i.parentNode;)i=i.parentNode;if(i){for(i=i.childNodes,n=0;n<i.length;n++)1!==i[n].nodeType&&11!==i[n].nodeType&&9!==i[n].nodeType||o.push(i[n]);o=t._sizzle_.filter(o,e)}else o=[]}else o=[];for(n=o.length;n<r.length;n++)delete r[n];for(r.length=o.length,n=0;n<o.length;n++)r[n]=o[n];return r.selector=r.selector+":siblings('"+e+"')",r},next:function(){var e,n,r=t(this),i=0;for(e=0;e<r.length;e++){for(r[e]&&(n=r[e].nextSibling);n&&1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType&&n.nextSibling;)n=n.nextSibling;!n||1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType||(r[i]=n,i++)}for(e=i;e<r.length;e++)delete r[e];return r.length=i,r.selector=r.selector+":next()",r},nextAll:function(e){e=e||"";for(var n,r=t(this),i=r[0],o=[];i&&i.nextSibling;)1!==(i=i.nextSibling).nodeType&&11!==i.nodeType&&9!==i.nodeType||o.push(i);for(n=(o=t._sizzle_.filter(o,e)).length;n<r.length;n++)delete r[n];for(r.length=o.length,n=0;n<o.length;n++)r[n]=o[n];return r.selector=r.selector+":nextAll('"+e+"')",r},prev:function(){var e,n,r=t(this),i=0;for(e=0;e<r.length;e++){for(r[e]&&(n=r[e].previousSibling);n&&1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType&&n.previousSibling;)n=n.previousSibling;!n||1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType||(r[i]=n,i++)}for(e=i;e<r.length;e++)delete r[e];return r.length=i,r.selector=r.selector+":prev()",r},prevAll:function(e){e=e||"";for(var n,r=t(this),i=r[0],o=[];i&&i.previousSibling;)1!==(i=i.previousSibling).nodeType&&11!==i.nodeType&&9!==i.nodeType||o.push(i);for(n=(o=t._sizzle_.filter(o,e)).length;n<r.length;n++)delete r[n];for(r.length=o.length,n=0;n<o.length;n++)r[n]=o[n];return r.selector=r.selector+":prevAll('"+e+"')",r},find:function(e){return"设计中......"},filter:function(e){e=e||"";var n,r=t(this),i=[];for(n=0;n<r.length;n++)i.push(r[n]);for(n=(i=t._sizzle_.filter(i,e)).length;n<r.length;n++)delete r[n];for(r.length=i.length,n=0;n<i.length;n++)r[n]=i[n];return r.selector=r.selector+":filter('"+e+"')",r}})}(window,window.Luna);