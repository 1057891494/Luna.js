/*! 
====================================
    个人内部使用的小型js工具库
    心叶
    V0.0.1-alpha
    最后修改于：2018-02-01
====================================
*/

!function(t,e,n){"use strict";if(!t||!t.document)throw new Error("Luna requires a window with a document!");!function(t,e){var n=function(t,e){return new n.prototype.init(t,e)};n.prototype.init=function(t,i,o){var s;if("string"==typeof t&&(t=(t+"").trim()),this.length=0,o=o||r,i=i?n(i)[0]:document,!t)return this;if(this.selector=t,"body"==t)return this.context=document,this[0]=document.body,this.isTouch=!0,this.length=1,this;if("string"==typeof t){if(t=(t+"").trim().replace(/[\n\f\r]/g,""),/^</.test(t)){if(!i)throw new Error("Parameter error!");var a=document.createElement("div");return a.innerHTML=t,this[0]=a.childNodes[0],this.isTouch=!0,this.length=1,this.context=e,this}if(!n.doSelector)throw new Error("Sizzle is necessary for Luna!");var u=n.sizzle(t,i);for(s=0;s<u.length;s++)this[s]=u[s];return this.length=s,this.isTouch=!0,this.context=i,this}if(1===t.nodeType||11===t.nodeType||9===t.nodeType)return this.context=i,this[0]=t,this.isTouch=!0,this.length=1,this;if("function"==typeof t)return n.__isLoad__?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),t(),n.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function e(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t(),n.__isLoad__=!0)}),this;if(t.isTouch){for(this.isTouch=!0,s=0;s<t.length;s++)this[s]=t[s];return this.context=t.context||i,this.length=t.length,this.selector=t.selector,this}return this};var r=n(document);n.prototype.extend=n.extend=function(){var t=arguments[0]||{},e=arguments[1]||{},n=arguments.length;for(var r in 1===n&&(e=t,t=this),"object"!=typeof t&&"function"!=typeof t&&(t={}),e)try{t[r]=e[r]}catch(t){throw new Error("Illegal property value！")}return t},n.prototype.init.prototype=n.prototype,n.__isLoad__=!1,t.Luna=t.$=n}(t)}(window),function(t,e,n){"use strict";e.prototype.extend({bind:function(n,r,i){var o=e(this);return t.attachEvent?o[0].attachEvent("on"+n,r):(i=i||!1,o[0].addEventListener(n,r,i)),o},unbind:function(n,r,i){var o=e(this);return t.detachEvent?o[0].detachEvent("on"+n,r):(i=i||!1,o[0].removeEventListener(n,r,i)),o}})}(window,window.Luna),function(t,e,n){"use strict";e.prototype.extend({html:function(t){var n=e(this);return""==t||t?(n[0].innerHTML=t,n):n[0].innerHTML},text:function(t){var n=e(this);return t?(n[0].innerText=t,n):n[0].innerText},val:function(t){var n=e(this);return t?(n[0].value=t,n):n[0].value},attr:function(t,n){var r=e(this);return n?(r[0].setAttribute(t,n),r):r[0].getAttribute(t)},addClass:function(t){var n,r,i=e(this);if("string"==typeof t&&t){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var s=e.uniqueClass(r,t);n.setAttribute("class",s),n=i[o++]}}return i},removeClass:function(t){var n,r,i=e(this);if("string"==typeof t&&t){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var s=e.operateClass(r,t,!0);n.setAttribute("class",s),n=i[o++]}}return i},toggleClass:function(t){var n,r,i=e(this);if("string"==typeof t&&t){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var s=e.operateClass(r,t);n.setAttribute("class",s),n=i[o++]}}return i},class:function(t){var n,r=e(this);if("string"!=typeof t||!t)return r[0].getAttribute("class")||"";var i=0;for(n=r[i++];n;)n.setAttribute("class",e.uniqueClass(t)),n=r[i++];return r},css:function(t,n){var r=e(this);if("string"==typeof t&&1===arguments.length)return r[0].style[t];if("string"==typeof t&&"string"==typeof n)r[0].style[t]=n;else{if("object"!=typeof t)throw new Error("Not acceptable type!");for(var i in t)r[0].style[i]=t[i]}return r},append:function(t){var n=e(this);if(1===t.nodeType||11===t.nodeType||9===t.nodeType)n[0].appendChild(t);else if(t.isTouch)n[0].appendChild(t[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");n[0].appendChild(e(t)[0])}return n},prepend:function(t){var n=e(this);if(1===t.nodeType||11===t.nodeType||9===t.nodeType)n[0].insertBefore(t,n[0].childNodes[0]);else if(t.isTouch)n[0].insertBefore(t[0],n[0].childNodes[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");n[0].insertBefore(e(t)[0],n[0].childNodes[0])}return n},after:function(t){var n=e(this),r=n[0].parentNode||e("body")[0];if(1===t.nodeType||11===t.nodeType||9===t.nodeType)r.insertBefore(t,n[0].nextSibling);else if(t.isTouch)r.insertBefore(t[0],n[0].nextSibling);else{if("string"!=typeof t)throw new Error("Not acceptable type!");r.insertBefore(e(t)[0],n[0].nextSibling)}return n},before:function(t){var n=e(this),r=n[0].parentNode||e("body")[0];if(1===t.nodeType||11===t.nodeType||9===t.nodeType)r.insertBefore(t,n[0]);else if(t.isTouch)r.insertBefore(t[0],n[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");r.insertBefore(e(t)[0],n[0])}return n},remove:function(){var t=e(this);return(t[0].parentNode||e("body")[0]).removeChild(t[0]),t},empty:function(){var t=e(this);return t.html(""),t}})}(window,window.Luna),function(t,e,n){"use strict";e.extend({sizzle:function(t,e){throw new Error("开发中......")}})}(window,window.Luna),function(t,e,n){"use strict";e.extend({outerHTML:function(t){return t.outerHTML||(e=t,(r=document.createElement("div")).appendChild(e),n=r.innerHTML,r=null,n);var e,n,r},uniqueClass:function(){for(var t="",e=0;e<arguments.length;e++){if("string"!=typeof arguments[e])throw new Error("Only string is valid,not project!");t+=arguments[e]+" "}var n=(t=t.trim()).split(/ +/),r={};for(var i in n.forEach(function(t){r[t]=!0},this),t="",r)r[i]&&(t+=i+" ");return t.trim()},operateClass:function(t,e,n){if("string"!=typeof t||"string"!=typeof e)throw new Error("Only string is valid,not project!");t=t.trim(),e=e.trim();var r=t.split(/ +/),i=e.split(/ +/),o={};r.forEach(function(t){o[t]=!0},this),i.forEach(function(t){o[t]=!n&&!o[t]},this);var s="";for(var a in o)o[a]&&(s+=a+" ");return s.trim()}})}(window,window.Luna);