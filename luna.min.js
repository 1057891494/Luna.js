/*! 
====================================
    个人内部使用的小型js工具库
    心叶
    V0.0.1-alpha
    最后修改于：2018-02-02
====================================
*/

!function(t,e,n){"use strict";if(!t||!t.document)throw new Error("Luna requires a window with a document!");!function(t,e){var n=function(t,e){return new n.prototype.init(t,e)};n.prototype.init=function(t,i,o){var s;if("string"==typeof t&&(t=(t+"").trim()),this.length=0,o=o||r,i=i?n(i)[0]:document,!t)return this;if(this.selector=t,"body"==t)return this.context=document,this[0]=document.body,this.isTouch=!0,this.length=1,this;if("string"==typeof t){if(t=(t+"").trim().replace(/[\n\f\r]/g,""),/^</.test(t)){if(!i)throw new Error("Parameter error!");var c=document.createElement("div");return c.innerHTML=t,this[0]=c.childNodes[0],this.isTouch=!0,this.length=1,this.context=e,this}if(!n.sizzle)throw new Error("Sizzle is necessary for Luna!");var l=n.sizzle(t,i);for(s=0;s<l.length;s++)this[s]=l[s];return this.length=s,this.isTouch=!0,this.context=i,this}if(1===t.nodeType||11===t.nodeType||9===t.nodeType)return this.context=i,this[0]=t,this.isTouch=!0,this.length=1,this;if("function"==typeof t)return n.__isLoad__?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),t(),n.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function e(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t(),n.__isLoad__=!0)}),this;if(t.isTouch){for(this.isTouch=!0,s=0;s<t.length;s++)this[s]=t[s];return this.context=t.context||i,this.length=t.length,this.selector=t.selector,this}return this};var r=n(document);n.prototype.extend=n.extend=function(){var t=arguments[0]||{},e=arguments[1]||{},n=arguments.length;for(var r in 1===n&&(e=t,t=this),"object"!=typeof t&&"function"!=typeof t&&(t={}),e)try{t[r]=e[r]}catch(t){throw new Error("Illegal property value！")}return t},n.prototype.init.prototype=n.prototype,n.__isLoad__=!1,n.clock={timers:[],interval:13,speeds:400,timerId:null},n._sizzle_={},t.Luna=t.$=n}(t)}(window),function(t,e,n){"use strict";e.prototype.extend({bind:function(n,r,i){var o=e(this);return t.attachEvent?o[0].attachEvent("on"+n,r):(i=i||!1,o[0].addEventListener(n,r,i)),o},unbind:function(n,r,i){var o=e(this);return t.detachEvent?o[0].detachEvent("on"+n,r):(i=i||!1,o[0].removeEventListener(n,r,i)),o}})}(window,window.Luna),function(t,e,n){"use strict";e.prototype.extend({html:function(t){var n=e(this);if(""==t||t){for(var r=0;r<n.length;r++)n[r].innerHTML=t;return n}return n[0].innerHTML},text:function(t){var n=e(this);if(t){for(var r=0;r<n.length;r++)n[0].innerText=t;return n}return n[0].innerText},val:function(t){var n=e(this);if(t){for(var r=0;r<n.length;r++)n[0].value=t;return n}return n[0].value},attr:function(t,n){var r=e(this);if(n){for(var i=0;i<r.length;i++)r[0].setAttribute(t,n);return r}return r[0].getAttribute(t)},hasClass:function(t){var n=e(this[0]);return!!("string"==typeof t&&t&&(" "+n.class()+" ").search(" "+t+" ")>=0)},addClass:function(t){var n,r,i=e(this);if("string"==typeof t&&t){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var s=e.uniqueClass(r,t);n.setAttribute("class",s),n=i[o++]}}return i},removeClass:function(t){var n,r,i=e(this);if("string"==typeof t&&t){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var s=e.operateClass(r,t,!0);n.setAttribute("class",s),n=i[o++]}}return i},toggleClass:function(t){var n,r,i=e(this);if("string"==typeof t&&t){var o=0;for(n=i[o++];n;){r=n.getAttribute("class")||"";var s=e.operateClass(r,t);n.setAttribute("class",s),n=i[o++]}}return i},class:function(t){var n,r=e(this);if("string"!=typeof t||!t)return r[0].getAttribute("class")||"";var i=0;for(n=r[i++];n;)n.setAttribute("class",e.uniqueClass(t)),n=r[i++];return r},css:function(t,n){var r,i=e(this);if("string"==typeof t&&1===arguments.length)return i[0].style[t];if("string"==typeof t&&"string"==typeof n)for(r=0;r<i.length;r++)i[r].style[t]=n;else{if("object"!=typeof t)throw new Error("Not acceptable type!");for(var o in t)for(r=0;r<i.length;r++)i[r].style[o]=t[o]}return i},append:function(t){var n,r=e(this);if(1===t.nodeType||11===t.nodeType||9===t.nodeType)for(n=0;n<r.length;n++)r[n].appendChild(t);else if(t.isTouch)for(n=0;n<r.length;n++)r[n].appendChild(t[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");for(n=0;n<r.length;n++)r[n].appendChild(e(t)[0])}return r},prepend:function(t){var n,r=e(this);if(1===t.nodeType||11===t.nodeType||9===t.nodeType)for(n=0;n<r.length;n++)r[n].insertBefore(t,r[0].childNodes[0]);else if(t.isTouch)for(n=0;n<r.length;n++)r[n].insertBefore(t[0],r[0].childNodes[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");for(n=0;n<r.length;n++)r[n].insertBefore(e(t)[0],r[0].childNodes[0])}return r},after:function(t){var n,r,i=e(this);for(n=0;n<i.length;n++)if(r=i[n].parentNode||e("body")[0],1===t.nodeType||11===t.nodeType||9===t.nodeType)r.insertBefore(t,i[0].nextSibling);else if(t.isTouch)r.insertBefore(t[0],i[0].nextSibling);else{if("string"!=typeof t)throw new Error("Not acceptable type!");r.insertBefore(e(t)[0],i[0].nextSibling)}return i},before:function(t){var n,r,i=e(this);for(r=0;r<i.length;r++)if(n=i[0].parentNode||e("body")[0],1===t.nodeType||11===t.nodeType||9===t.nodeType)n.insertBefore(t,i[0]);else if(t.isTouch)n.insertBefore(t[0],i[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");n.insertBefore(e(t)[0],i[0])}return i},remove:function(){var t,n=e(this);for(t=0;t<n.length;t++){(n[t].parentNode||e("body")[0]).removeChild(n[0])}return n},empty:function(){var t,n=e(this);for(t=0;t<n.length;t++)$(n[t]).html("");return n}})}(window,window.Luna),function(t,e,n){"use strict";e.extend({outerHTML:function(t){return t.outerHTML||(e=t,(r=document.createElement("div")).appendChild(e),n=r.innerHTML,r=null,n);var e,n,r},uniqueClass:function(){for(var t="",e=0;e<arguments.length;e++){if("string"!=typeof arguments[e])throw new Error("Only string is valid,not project!");t+=arguments[e]+" "}var n=(t=t.trim()).split(/ +/),r={};for(var i in n.forEach(function(t){r[t]=!0},this),t="",r)r[i]&&(t+=i+" ");return t.trim()},operateClass:function(t,e,n){if("string"!=typeof t||"string"!=typeof e)throw new Error("Only string is valid,not project!");t=t.trim(),e=e.trim();var r=t.split(/ +/),i=e.split(/ +/),o={};r.forEach(function(t){o[t]=!0},this),i.forEach(function(t){o[t]=!n&&!o[t]},this);var s="";for(var c in o)o[c]&&(s+=c+" ");return s.trim()}})}(window,window.Luna),function(t,e,n){"use strict";e.extend({animation:function(t,n,r){e.clock.timer(function(e){t(e)},n,r)}}),e.extend(e.clock,{timer:function(t,n,r){if(!t)throw new Error("tick is required!");n=n||e.clock.speeds,e.clock.timers.push({createTime:new Date,tick:t,duration:n,callback:r}),e.clock.start()},start:function(){e.clock.timerId||(e.clock.timerId=t.setInterval(e.clock.tick,e.clock.interval))},tick:function(){var t,n,r,i,o,s,c,l=e.clock.timers;for(e.clock.timers=[],e.clock.timers.length=0,n=0;n<l.length;n++)t=(o=l[n]).createTime,r=o.tick,s=o.duration,i=o.callback,!1,(c=(+new Date-t)/s)>=1&&!0,r(100*(c=c>1?1:c)),c<1?e.clock.timers.push(o):i&&i();e.clock.timers.length<=0&&e.clock.stop()},stop:function(){e.clock.timerId&&(t.clearInterval(e.clock.timerId),e.clock.timerId=null)}})}(window,window.Luna),function(t,e,n){"use strict";e.extend({sizzle:function(t,n){var r,i,o=[];if("*"==(t=t.trim()))for(i=n.getElementsByTagName("*"),r=0;r<i.length;r++)o.push(i[r]);else if(e._sizzle_.isSingle(t))if(e._sizzle_.isID(t))o.push(document.getElementById(t.replace(/^#/,"")));else if(e._sizzle_.isClass(t))if(n.getElementsByClassName)for(i=n.getElementsByClassName(t.replace(/^./,"")),r=0;r<i.length;r++)o.push(i[r]);else for(i=n.getElementsByTagName("*"),r=0;r<i.length;r++)e(i[r]).hasClass(t.replace(/^./,""))&&o.push(i[r]);else if(e._sizzle_.isElemment(t))for(i=n.getElementsByTagName(t),r=0;r<i.length;r++)o.push(i[r]);else{if(!e._sizzle_.isAttr(t))throw new Error("非法的选择器:"+t);if(n.querySelectorAll){i=n.getElementsByTagName("*");var s=/^\[([^=]+)=(["'])([^=]+)\2\]$/.exec(t);for(r=0;r<i.length;r++)s[3]==e(i[r]).attr(s[1])&&o.push(i[r])}else for(i=n.querySelectorAll(t),r=0;r<i.length;r++)o.push(i[r])}else e._sizzle_.notLayer(t)?o.push("第二部分：复合的单选择器   开发中"):o.push(!0);return o}}),e.extend(e._sizzle_,{notLayer:function(t){return!/[> ~+]/.test(t)},notComplex:function(t){return!e._sizzle_.notLayer(t)||(!/[#.[]/.test(t)||!!/^[#.[]/.test(t)&&(t=t.replace(/^[#.[]/,""),!/[#.[]/.test(t)))},isSingle:function(t){return!(!e._sizzle_.notLayer(t)||!e._sizzle_.notComplex(t))},isID:function(t){return!!/^#/.test(t)},isClass:function(t){return!!/^\./.test(t)},isElemment:function(t){return!/^[#.[]/.test(t)},isAttr:function(t){return!!/^\[([^=]+)=(["'])([^=]+)\2\]$/.test(t)}})}(window,window.Luna);